import discord
from discord.ext import commands
import random
import asyncio  # GÃ¼nlÃ¼k bilgi paylaÅŸÄ±mÄ± iÃ§in gerekli
from datetime import timedelta

TOKEN = ""
intents = discord.Intents.default()
intents.message_content = True
bot = commands.Bot(command_prefix="!", intents=intents)

bilgiler = [
    "Her yÄ±l yaklaÅŸÄ±k 8 milyon ton plastik atÄ±k okyanuslara karÄ±ÅŸÄ±yor. Bu, deniz canlÄ±larÄ±na bÃ¼yÃ¼k zarar veriyor.",
    "Hava kirliliÄŸi, her yÄ±l dÃ¼nya genelinde milyonlarca erken Ã¶lÃ¼me neden oluyor.",
    "Su kaynaklarÄ±nÄ±n kirlenmesi, iÃ§me suyu sÄ±kÄ±ntÄ±sÄ±na yol aÃ§abilir.",
]

tavsiyeler = [
    "Plastik atÄ±klarÄ± azaltmak iÃ§in kendi su ÅŸiÅŸenizi ve Ã§antanÄ±zÄ± kullanÄ±n.",
    "DoÄŸaya zarar vermemek iÃ§in Ã§Ã¶pleri geri dÃ¶nÃ¼ÅŸÃ¼m kutularÄ±na atÄ±n.",
    "KaÄŸÄ±t tÃ¼ketimini azaltmak iÃ§in dijital notlar almayÄ± tercih edin.",
]

@bot.event
async def on_ready():
    print(f'{bot.user} Ã§evrimiÃ§i ve hazÄ±r!')
    bot.loop.create_task(gunluk_bilgi_paylasimi())  # GÃ¼nlÃ¼k bilgi paylaÅŸÄ±mÄ± gÃ¶revini baÅŸlat


@bot.command()
async def bilgi(ctx):
    bilgi = random.choice(bilgiler)
    await ctx.send(f'ğŸŒ Ã‡evre Bilgisi: {bilgi}')


@bot.command()
async def tavsiye(ctx):
    tavsiye = random.choice(tavsiyeler)
    await ctx.send(f'ğŸ’¡ Ã‡evre Tavsiyesi: {tavsiye}')


@bot.event
async def on_command_error(ctx, error):
    if isinstance(error, commands.CommandNotFound):
        await ctx.send('Bu geÃ§erli bir komut deÄŸil! KullanabileceÄŸiniz komutlar: `!bilgi`, `!tavsiye`')


# GÃ¼nlÃ¼k bilgi paylaÅŸÄ±mÄ± dÃ¶ngÃ¼sÃ¼
async def gunluk_bilgi_paylasimi():
    await bot.wait_until_ready()
    kanal_id = 1301985338197016590  # Verilen kanal ID'si

    while not bot.is_closed():
        now = (discord.utils.utcnow() + timedelta(hours=3)).time()  # TÃ¼rkiye saatine gÃ¶re UTC+3

        # Test iÃ§in ÅŸu anki saat ve dakikayÄ± kontrol ediyoruz
        if now.hour == 22 and now.minute == 15:  # Åu anki saat/dakikayÄ± ayarlayÄ±n
            kanal = bot.get_channel(kanal_id)
            if kanal:
                bilgi = random.choice(bilgiler)
                await kanal.send(f'ğŸŒ GÃ¼nÃ¼n Ã‡evre Bilgisi: {bilgi}')
            await asyncio.sleep(60)  # Test sonrasÄ± tekrar etmemesi iÃ§in 1 dakika bekler
        await asyncio.sleep(1)

bot.run(TOKEN)
